---
layout: post
title: "[컴퓨터시스템보안] 13주차 - 운영체제 보안"
excerpt: "운영체제 보안 개요, 시스템 보안 계획, 운영체제 강화, 응용 프로그램 보안, 보안 유지 보수, 리눅스/유닉스 보안, 윈도우 보안, 가상화 보안"

tags:
  - [컴퓨터시스템보안]

toc: true

date: 2025-05-29
last_modified_at: 2025-06-02
---
## 운영체제 보안
- OS의 각 계층 코드는 적절한 보안 서비스를 제공할 대책이 필요  
![os_layer_security][def]  
  - 각 계층은 하위 계층이 적절하게 보호되지 않을 경우, 아래 계층의 공격에 취약  

- **ASD 완화 전략**
  - 상위 35가지 완화 전력을 제시
  - 이 중, 상위 4개의 전략만 구현해도 85%의 공격을 막을 수 있음
   - (1) 우량으로 검증된 애플리케이션 목록 (**white-list**)
   - (2) Third-party 공급 업체의 애플리케이션 및 운영체제 취약점을 패치(**patch**)
   - (3) 관리자 권한을 필요로 하는 사용자를 제한
   - (4) 심층 방어 전략 시스템(**defense-in-depth system**) 구축  

   <br>

### 1. 운영체제 보안 개요  
- 시스템은 최신 패치를 설치하기 전에, **설치 과정 동안 위험에 빠질 가능성이 높음**

- 이러한 위협에 대비하고, 운용 기간동안 보안을 유지하기 위해 **계획된 절차에 따라 시스템 구축 및 배치**

- 시스템 구축 및 배치 절차
  - 위험 요소를 평가하고, 시스템 구축 및 배치를 **계획**
  - **먼저 운영체제를 보호** 후, 다음 **주요 애플리케이션들을 보호**
  - **중요한 컨텐츠를 보호** 했는 지 확인
  - 적절한 **네트워크 보호** 메커니즘을 사용했는 지 확인
  - 보안을 유지하기 위해 **적절한 절차**를 사용하는 지 확인  

<br>

### 2. 시스템 보안 계획
- (1) 새로운 시스템 구축/배치의 첫 단게는 **계획 수립**
- (2) 계획 수립에 있어 **조직의 보안 평가**를 수행
- (3) **비용을 최소화**하면서 **보안성을 최대화**하는 것이 목표
- (4) 계획 수립 시, 시스템, 애플리케이션, 데이터, 사용자에 대한 **보안 요구사항**을 정의
- (5) 전문 인력에게 요구되는 **기술과 필요한 도구**를 정의

<br>

### 3. 운영체제 강화  
- 시스템을 보호하는 첫 번째 중요한 단계는, **하부 운영체제를 보호**하는 것

- 운영체제를 보호하기 위한 기본 단계
  - (1) 운영체제 **설치 및 패치**

  - (2) 시스템 보안 요구사항을 다루기 위해 다음 작업을 수행하여 OS를 **견고화**하고 OS의 **환경설정(Configure)**
    - 불필요한 서비스, 애플리케이션, 프로토콜 제거
    - 사용자, 그룹 및 권한 설정
    - 리소스에 대한 접근 제어 설정

  - (3) 필요한 경우, 안티 바이러스, 호스트 기반 방화벽, 침입 탐지 시스템(IDS) 등 **보안 소프트웨어 설치**

  - (4) 올바르게 단계가 수행되었는 지 **운영체제의 보안 기능 테스트**

<br>

### 4. 응용 프로그램 보안  
- 운영체제를 설치한 후, 필요한 **서비스와 애플리케이션**을 설치하고 설정
- **필요한 SW만 설치**, 특히 **원격 접근을 제공하는 SW**는 주의 깊게 선정하여 설치
- 항상 **최근 버전으로 업데이트**

<br>

- **애플리케이션 설정**(application configuration)
  - 설정 작업 내용
    - 애플리케이션을 위한 **데이터 저장소** 생성 및 명시
    - 응용 프로그램이나 서비스의 **기본 설정**을 적절하게 변경

  - 일부 애플리케이션이나 서비스는 **기본 데이터**, **스크립트** 또는 **사용자 계정**을 포함
    - 이들은 항시 점검하고, 필요한 경우에만 유지하며, 적절하게 보호해야 함
    - e.g., 상당수 안전하지 않은 예제 스크립트를 가진 웹 서버  

  - 특히, **웹**과 **파일 전송**과 같이 외부에서 접근할 수 있는 서비스는  
  허용되는 접근 권한을 검토해야 함.
    - 서버 프로그램은 명시적으로 필요하지 않으면, **파일 변경 권한**을 허용하지 X
    - **웹 변조**(Web defacement) 공격
      - 공격자가 서버가 실행하는 SW 또는 스크립트 취약점을 이용
    - 서버가 대부분의 파일을 **Read-Only**로 설정하면, 웹 변조 공격의 위험 경감 가능

    <br>

- **암호화 기술**
  - 적절한 암호 키/서명으로 데이터를 보호
  - `TLS`나 `IPsec`과 같은 암호화 프로토콜을 사용하여 네트워크 서비스 제공
    - 공개 키와 개인 키 생성 필요
  - `SSH`를 사용하여 안전한 원격 접근 제공
    - 서버와 클라이언트 키 생성 필요
  - 암호화된 파일 시스템

<br>

### 5. 보안 유지 보수
- 지속적인 보안 유지 보수는 반드시 필요

- 보안 유지 보수 내용
  - **로깅** 정보의 감시 및 분석
  - 정기적인 **백업** 수행
  - 공격 피해로부터 **복구**
  - 정기적인 시스템 **보안 테스트**
  - 중요한 소프트웨어를 **패치하고 업데이트**하기 위해, 또한 필요할 때 마다 설정을 감시/수정하기 위해 **소프트웨어 유지보수 절차** 사용

<br>

- **로깅**(Logging)
  - 이미 발생한 나쁜 일에 대해서만 알릴 수 있음
  - 파괴 혹은 고장 시, 무슨 일이 발생했는 지를 빠르게 찾을 수 있음
  - 핵심은 올바른 데이터를 수집하고, 감시 및 분석하는 것
  - 시스템, 네트워크, 애플리케이션이 생성 가능
  - 로깅을 위한 충분한 공간 할당 필요
  - 수동 보다는 자동 분석 방법을 권장

<br>

- **데이터 백업과 아카이브**(Data backup and archive)  
  - 데이터의 정기적인 백업은 무결성 유지에 중요한 작업
  - 백업 : 짧은 시간 간격을 두고 데이터 복사본을 만드는 업무 절차
  - 아카이브 : 장기간에 걸쳐 데이터의 복사본을 보존하는 업무 절차
  - 백업 및 아카이브에 대한 정책은, 시스템 계획 수립 단계에서 결정되어야 함.
    - 온라인 vs. 오프라인 관리
    - 로컬 vs. 원격 사이트 저장
    - 구현의 난이도 및 비용 vs. 보안성 및 견고성  

    <br>

### 6. 리눅스/유닉스 보안  
- 패치 관리
  - OS와 애플리케이션을 **최신 보안 패치**로 유지
  - 최신 리눅스/유닉스 배포판은 **자동 업데이트 도구**를 제공

- 애플리케이션과 서비스 설정
  - 설정은 **텍스트 파일**로 저장
  - **설정 파일**은 일반적으로 `/etc` 디렉토리에나 설치 디렉토리에 위치
  - 시스템의 **기본 설정**을 override할 수 있는 **사용자 설정**은 사용자의 **홈 디렉토리에 숨겨진 "dot" 파일**로 저장
  - 시스템 보안 향상을 위해, **원격 접근 가능 서비스**와 **필요하지 않은 애플리케이션**은 비활성화.

- 사용자, 그룹, Ownership  
![user_group_ownership](TODO)  
  - 유닉스/리눅스 시스템은 리소스에 대해 **임의 접근 제어(DAC)**를 제공
  - 접근 제어는 각 리소스에 대해 **소유자**, **그룹**, **기타 사용자**의 **읽기**, **쓰기**, **실행** 권한을 설정하여 수행 (`chmod`)
  - 유닉스/리눅스의 instruction에는 **중요한 디렉토리와 파일**에 대해 **접근 권한을 제한**하도록 변경할 것을 권장
    - 주요 공격 목표 : `root`에 대해 `setuid` 비트가 설정되었거나 권한 있는 그룹에 대해 `setgid` 비트가 설정된 프로그램  
    - Local exploit : 권한 상승에 악용 가능한 위와 같은 소프트웨어의 취약점
    - Remote exploit : 원격에서 접근 가능한 네트워크 서버 SW의 취약점  

- 원격 접근 제어
  - Remote exploit을 방지하기 위해, **필요한 서비스만 원격에서 접근 가능**하도록 설정
  - **Perimeter 방화벽**으로 제공될 수 있으며, 일부 **호스트 기반 방화벽**이나 **네트워크 접근 제어 메커니즘**으로 추가 방어 제공 가능
  - 대부분의 시스템은 **관리자 유틸리티**를 제공하여 시스템 접근이 허용되는 서비스를 선택할 수 있도록 함.  

<br>

- Logging
  - 대부분의 애플리케이션들은 **디버깅**부터 **없음** 까지의 다양한 수준의 로깅을 지원
  - 애플리케이션마다 전용 로그 파일을 지정하거나, 또는 공용 `/dev/log` 디렉토리에 로그를 기록하기 위해 `syslog`를 사용  

- Log rotation
  - 큰 log file은 처리가 어렵고, 파일 시스템의 용량은 유한하므로 **대용량 log file**에 대한 해결책이 log rotation
  - 주기적으로 log file을 **다른 이름의 파일**에 옮기고, log file을 비움. 일정 기간이 지나면 예전 log file을 삭제 (life-cycle)  

  <br>

- **chroot jail**
  - 네트워크에서 접근 가능한 서비스 중에서, 전체 파일 시스템이 아닌 **일부 데이터 파일과 디렉토리만 필요**한 경우가 있다.
    - `FTP` - 특정 디렉토리에 파일을 업로드하고, 그 디렉토리로부터 파일을 다운로드
    - 이런 서버가 침입당해 **공격자가 전체 파일 시스템**을 접근할 수 있다면, 시스템이 위태로워짐
    - 리눅스/유닉스에서는 이런 서비스들을 **chroot jail**에서 실행할 수 있도록 메커니즘을 제공
    - `chroot` system call은 다른 디렉토리를 파일 시스템의 루트로 매핑시켜, 접근을 **파일 시스템의 일부분으로 제한**
    - chroot jail 외부의 파일과 디렉토리는 볼 수도 없고, 접근할 수도 없음
    - 단, **복잡성이 증가**하고, 만약 chroot로 처리된 프로세스가 root 권한을 가진다면 chroot jail이 깨질 수 있음  

<br>

- 보안 테스팅
  - **NSA-보안 설정 안내서**와 같은 안내서는 다양한 유닉스/리눅스 배포판을 위한 **보안 체크 리스트**를 제공  
  - 시스템 보안 스캐닝과 취약점 검사를 위한 많은 상업용/오픈 소스 도구가 존재
    - Nessus, Tripwire, Nmap 등

<br>

### 7. 윈도우 보안  
- 패치 관리
  - **윈도우 업데이트**와 **윈도우 서버 업데이트 서비스**는 정기적인 유지 관리를 제공하므로 반드시 사용
  - third-party 애플리케이션도 **자동 업데이트** 제공

- 사용자 관리와 접근 제어
  - 윈도우 시스템은 파일/공유 메모리 등 리소스에 대해 **임의 접근 제어(DAC)**를 제공
  - 윈도우 Vista 이후 시스템들은 의무적으로 **무결성 제어**를 포함
  - 프로세스, 파일, 사용자 등 모든 객체에게 **등급**으로 라벨링
  - 객체에 데이터를 쓸 때, 시스템은 **주체의 무결성 등급**이 **객체의 무결성 등급**보다 높거나 같을 때만 허용
  - **Biba 무결성 모델**을 기반
  - (1) **특별한 권한**(privilege)
  - (2) **사용자 계정 제어**(UAC)
  - (3) **공유**(share)와 **NTFS 허가권**의 조합
  - (4) **낮은 권한 서비스 계정**(LPSA)  

<br>

- 애플리케이션 및 서비스 설정
  - 대부분의 설정 정보는 **레지스트리**에 저장
    - 레지스트리는 **키와 값**들의 **데이터베이스**
  - 레지스트리 키 값의 변경
    - 특정 애플리케이션이 수행
    - **레지스트리 편집기**(regedit)를 사용하여 직접 수정도 가능

<br>

- 다른 보안 제어들
  - **안티-바이러스**, **안티-스파이웨어**, **개인 방화벽**, 그리고 기타 **SW 패키지** 설치와 설정 필요
  - 현재 윈도우 시스템은 기본적인 **방화벽**과 **악성코드 대비 기능**을 제공
  - **상업용 보안 제품**(Norton, V3, 알약 등)을 사용하여 보완할 수 있지만, 서로 다른 제품들 간 **좋지 않은 호환성** 문제를 주의해야 함
  - 윈도우 시스템은 **다양한 암호 함수**를 제공
    - **암호화된 파일 시스템(EFS)**를 사용하여 파일과 폴더를 암호화
    - **BitLocker**를 사용하여 전체 디스크를 AES로 암호화
  - 보안 테스팅
    - **NSA-보안 설정 안내서**와 같은 안내서는 다양한 윈도우 배포판을 위한 **보안 체크 리스트**를 제공
    - **Microsoft Baseline Security Analyzer** : 다양한 윈도우 배포판을 위한 무료 보안 스캐너  

<br>

### 8. 가상화 보안  
- **가상화**는 소프트웨어에게 **컴퓨팅 리소스의 추상화**를 제공
  - 애플리케이션 가상화 : 하나의 환경을 위해 작성된 애플리케이션을 다른 운영체제에서 실행할 수 있게 해줌 (자바 가상기계 환경 (JVM))  
  - 완전 가상화 : 여러 개의 완전한 OS들을 가상 HW에서 실행
  - 가상 기계 모니터(VMM) 또는 **hypervisor** : 실제와 비슷한 HW 인터페이스 제공
  - 가상 HW는 **hypervisor**에 의해 제공  

- 가상화의 장점
  - 하나의 OS 사용보다, **물리적 시스템 리소스를 효율적으로 사용**
  - 하나의 물리적 시스템에서 **여러 OS를 실행**할 수 있음

- 그러나 추가적인 보안 문제 발생
  - 함께 실행되는 **여러 OS**로 인해 발생
  - OS 커널 아래 **가상화 환경**과 **hypervisor**, 이들이 제공하는 **보안 서비스의 존재**로 인해 발생

<br>

- 기존 가상화 보안 계층  
![native_virtualization_security_layers](TODO)  
  - 일반적으로 서버에섯 사용
  - 호스트 가상화보다 계층이 적어 더 안전

- 호스트 가상화 보안 계층  
![hosted_virtualization_security_layers](TODO)  
  - 일반적으로 클라이언트에서 사용
  - 계층이 하나 더 있어 보안 문제 야기 가능

<br>

- **가상화 보안 문제점**
  - **게스트 OS의 격리** : 한 guest OS에서 실행 중인 프로그램은 해당 OS에 할당된 리소스만 사용하도록 하고, 다른 guest OS나 hypervisor에 접근 X
  - **Hypervisor의 게스트 OS 감시** : 감시는 guest OS 내의 프로그램과 데이터에 대해 접근 권한을 가져야 하고, 이 접근으로 인해 guest OS가 파괴되면 안됨
  - **가상화 환경 보안** : 공격자가 살펴보거나 변경을 시도할 수 있는 이미지와 스냅샷을 안전하게 관리해야 함  

  <br>

- **Hypervisor 보안**
  - 필수 사항
    - 운영체제 보호와 유사한 절차로 보호
    - 격리된 환경에서 설치
    - 자동 업데이트 설정
    - 사용하지 않는 서비스/HW를 분리
    - guest OS에 대한 적절한 감시
    - hypervisor에 대한 위험 징후 감시

  - Hypervisor는 반드시 **권한 있는 관리자**만이 접근 가능하도록
    - 특히 원격 관리 기능 사용 시 적절한 인증과 암호화 사용
    - 네트워크 방화벽과 IDS 기능 설계 시 원격 관리를 위한 접근도 고려

  - 이상적으로는 별도의 **분리된 네트워크** 사용

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 이헌길 교수님의 컴퓨터시스템보안 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details>

[def]: https://i.imgur.com/czxu7Lm.png