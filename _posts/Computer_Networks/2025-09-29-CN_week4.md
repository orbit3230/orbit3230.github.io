---
layout: post
title: "[컴퓨터네트워크] 3주차 - SDN & Middleboxes"
excerpt: "Generalized forwarding, SDN, Middleboxes"

tags:
  - [컴퓨터네트워크]

toc: true

date: 2025-09-29
last_modified_at: 2025-09-29
---
## SDN (Software Defined Networking) & Middleboxes
### 1. Generalized forwarding, SDN  
- Flow table abstraction
  - Flow : 헤더 필드 값에 의해 정의(in link-, network-, transport-layer fields)
  - Genenralized forwarding : 간단한 패킷 핸들링 규칙
    - **match** : 패킷 헤더 필드의 패턴 값들
    - **action** : 매칭된 패킷에 대해, 패킷을 drop/forward/modify 하거나 패킷을 컨트롤러에 전송  
    - **priority** : 모호한 overlapping 패턴들을 구별하여 disambiguate
    - **counter** : # of bytes, # of packets  
  ![flow_table](TODO)  

<br>

- OpenFlow: flow table entry  
![openflow](TODO)  

- OpenFlow: example  
![openflow_example_1](TODO)  
![openflow_example_2](TODO)  

- OpenFlow abstraction
  - match+action abstraction -> 추상화는 다양한 서로 다른 장비들을 unify
  - **Router**
    - match : longest destination IP prefix
    - action : forward out a link
- **Switch**
    - match : destination MAC address
    - action : forward or flood
  - **Firewall**
    - match : IP address & TCP/UDP port numbers
    - action : permit or deny
  - **NAT (Network Address Translation)**
    - match : IP address & port
    - action : rewrite address and port  

- OpenFlow example  
![openflow_example_3](TODO)  
![openflow_example_4](TODO)  
  - Orchestrated table은 network-wide behavior를 구현
  - e.g., host `h5`와 `h6`는 `s1`를 거쳐 `s2`로, 즉 `h3` 또는 `h4`에게 보내야만 한다.  

<br>

- Summary: generalized forwarding
  - "match + action" abstraction : 도달한 패킷 헤더 내 bits를 match하고, action을 취함  
    - 많은 필들에 대해 match 가능 (link-, network-, transport-layer fields)
    - Local actions : drop, forward, modify, or send matched packets to controller
    - "프로그램"으로 하여금 network-wide behavior를 구현하게 함  
  - "network programmability"의 간단한 모델
    - Programmable, per-packet "processing"
    - *historical roots* : active networking
    - *today* : 더 generalized된 forwarding, [P4][def]  

<br>

### 2. Middleboxes  
- Middlebox (RFC 3234)  
> "any intermediary box performing functions apart from normal, standard functions of an IP router on the data path between a source host and destination host."  
> "출발지 호스트와 목적지 호스트 사이의 데이터 경로에서 IP 라우터의 정상적이고 표준적인 기능 이외의 기능을 수행하는 중간 장치"  

<br>
  
- Middleboxes는 어디에나 있다 !  
![middleboxes_everywhere](TODO)  
  - NAT, Firewalls, IDS(Intrusion Detection System), Load Balancers, Caches, Application-specific  

<br>

- 초기 : proprietary(closed) hardware solutions (비공개 상표권의 하드웨어 솔루션)
- 점차 open API를 구현하는 "whitebox" 솔루션으로 이동
  - Move away from proprietary hardware solutions
  - Match+action을 통한 programmable local actions
  - Move toward innovation/differentiation in software

- SDN : (logically) 중앙 집중식 컨트롤 & configuration management often in public/private cloud

- Network Function Virtualization (NFV) : Programmable services over whitebox networking, computation, storage  

<br>

- Middlebox example: SDN & NFV  
![middlebox_example_sdn_nfv](TODO)  

<br>

- The IP hourglass  
  - 초기 생각  
  ![ip_hourglass_initial](TODO)  
    - IP는 "narrow waist"  
  - 현재 상황  
  ![ip_hourglass_now](TODO)  
    - "love handles" : 다양한 middleboxes & services  

<br>

- TODO FROM HERE

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 김도형 교수님의 컴퓨터네트워크 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details>

[def]: https://p4.org/