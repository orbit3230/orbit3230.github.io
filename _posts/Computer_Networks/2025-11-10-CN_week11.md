---
layout: post
title: "[컴퓨터네트워크] 11주차 - Introduction to the Link Layer and LANs"
excerpt: "Introduction to the Link Layer and LANs, Error Detection and Correction, Multiple Access Protocols"

tags:
  - [컴퓨터네트워크]

toc: true

date: 2025-11-10
last_modified_at: 2025-11-13
---
## Introduction to the Link Layer and LANs
### 1. Introduction to the Link Layer and LANs
- Terminology
  - Nodes : 호스트 / 라우터
  - Links : 서로 이웃하고 있는 노드들을 연결하는 커뮤니케이션 채널
    - wired, wireless, LANs, ...
  - Frame : layer-2 패킷. encapsulated datagram

- Link layer는 datagram을 한 노드에서 물리적으로 인접한 다른 노드로 보내는 데 의무가 있다.  
![link_layer_overview][def2]  

<br>

- Link layer services
  - **Framing, link access**
    - datagram을 frame으로 캡슐화 / 헤더, 트레일러 추가
    - shared medium이라면, Channel access
    - source/destination 노트 구별을 위한 frame header 내 "MAC" addresses

  - **Reliable delivery between adjacent nodes**
    - 우리는 어떻게 하는 지 이미 알고있다 !
    - low-bit error 링크에서는 거의 필요 없음
    - Wireless 링크에서 필요 : High error rates
    - 왜 link-level & end-to-end reliability 메커니즘이 모두 사용될까?
      - link-level에서 recovery 시 end-to-end 재전송 필요성이 감소한다.  
      end-to-end에서의 recovery보다 더 빠르고 효율적임에 의심의 여지가 없다.
      - 그러나 cost-effectiveness 측면에서 항상 link-level recovery를 할 수 있는 것은 아니다.  

  - **Flow control**
    - 인접한 송신 노드와 수신 노드 사이의 속도 조절

  - **Error detection**
    - 신호 간섭이나 노이즈로 인해 에러가 발생할 수 있다.
    - 수신자는 (1) 에러를 감지하고, (2) 신호 재전송을 요청하거나 (3) 프레임을 드랍한다.

  - **Error correction**
    - 수신자는 재전송 없이 에러를 감지하고 수정할 수 있다.

  - **Half-duplex / Full-duplex**
    - Half-duplex 환경에서는 양 쪽 노드가 동시에 전송할 수는 없다.  

<br>

- Link layer는 어디에 구현되어 있을까?  
![link_layer_location][def3]  
  - 각각의 모든 호스트에 구현되어 있다.
  - 정확히는 Link layer는 Network Interface Card(NIC) 또는 Chip에 구현되어 있다.
    - Ethernet, WiFi card or chip
    - link, physical layer를 구현
  - 호스트의 시스템 버스에 연결되어 있다.
  - Hardware, software, firmware의 조합으로 구현되어 있다.  

<br>

- Interfaces Communicating  
![link_layer_interfaces][def4]  
  - 송신 측
    - Datagram을 frame으로 캡슐화
    - Error checking bits, Reliable data transfer, Flow control 등 추가

  - 수신 측
    - Error, Reliable data transfer, Flow control 등 확인
    - Datagram 추출 후 상위 계층에 전달

<br>

### 2. Error Detection and Correction
- Error detection이 항상 100% reliable한 것은 아니다.
  - 프로토콜은 몇몇 오류를 놓칠 수 있지만, 그래도 매우 드물게 발생해야 한다.
  - 더 큰 EDC 필드는 더 나은 detection과 correction을 제공한다.

- **EDC**
  - Error Detection and Correction bits (e.g., redundancy)

- **D**
  - Data protected by error checking
  - 헤더 필드를 포함할 수 있다.  
  ![d_example][def5]  

<br>

- Parity checking
  - Single bit parity
    - single bit error를 **감지**  
    ![single_bit_parity_example][def6]  

    - 짝수 패리티(even parity) : 1의 개수가 짝수가 되도록 패리티 비트를 설정  
    - 홀수 패리티(odd parity) : 1의 개수가 홀수가 되도록 패리티 비트를 설정

  - Two-dimensional bit parity
    - single bit error를 **감지 및 수정**  
    ![two_dimensional_parity_example][def7]  

<br>

- Recap: Internet checksum  
  - [데이터 통신 포스팅을 참조][def]  

<br>

- Cyclic Redundancy Check (CRC)
  - 더 강력한 에러 검출 메커니즘
  - Terms
    - `D` : data bits
    - `G` : bit pattern (generator) of `r+1` bits

  - `r` CRC bits = `R`을 고른다. `<D, R>`이 정확히 `G`로 나누어 떨어지도록.  
  ![crc_example][def8]  
    - 수신자는 사전에 `G`를 알고있다.
    - `<D, R>`을 `G`로 나눈다. 만약 나누어떨어지지 않으면 에러가 발생한 것이다.  
    - 이를 통해 `r+1` 비트보다 작은 burst error를 감지할 수 있다.  
    - 실제로 ethernet, wifi 등에서 사용되고 있다.

  - CRC example  
  ![crc_example_calculation][def9]  
    - 우리는 `D`*`2`<sup>`r`</sup> XOR `R` = `nG`를 만족하는 `R`을 원한다.
    - 이는 곧,  
    `D`*`2`<sup>`r`</sup> XOR (XOR `R`) = `nG`  
    `D`*`2`<sup>`r`</sup> = `nG` XOR `R`  
    - 따라서, `R` = remainder of [`D`*`2`<sup>`r`</sup> / `G`]  

  - 더 큰 burst error를 감지하기 위해서는 더 큰 `r`이 필요하다.  
  물론, 더 큰 `r`은 더 많은 오버헤드를 의미한다.  
  그렇지만 bit pattern `G`이 커지기 때문에, 더 나은 에러 검출 능력을 제공한다.  

<br>

### 3. Multiple Access Protocols
- Two types of "links"
  - Point-to-point
    - 이더넷 스위치와 호스트 간의 Point-to-point 링크
    - dial-up 액세스를 위한 PPP
  
  - Broadcast (shared wire or medium)
    - Old-fashioned 이더넷
    - cable-based 액세스에서의 Upstream HFC
    - IEEE 802.11 무선 LANs, 4G/5G, satellite  

<br>

- Multiple access protocols
  - Single shared broadcast channel
  - 두 개 이상의 노드에서 동시 전송 -> **간섭**(interference)
    - 한 노드가 두 개 이상의 시그널을 동시에 받으면 -> Collision

  - **Multiple access protocol**
    - 어떻게 노드들이 채널을 공유하는 지를 결정하는 분산 알고리즘
    - 채널 공유 제어를 위한 통신은 채널 자체를 사용해야 한다.
      - No out-of-band channel for coordination

- Ideal Multiple access protocol
  - Given
    - `R`bps의 Multiple access channel

  - Desirable
    - **Fully utilized** : 하나의 싱글 노드가 전송을 원할 때, `R`bps로 전송할 수 있다.
    - **Fairly shared** : `N`개의 노드가 전송을 원할 때, 각 노드는 `R/N`bps로 전송할 수 있다.  
    - **Fully decentralized**
      - 전송을 coordinate할 특수 노드가 없어야 한다.
      - clock이나 slots에 대한 동기화가 없어야 한다
    - **Simple**

<br>

- Three broad classes of MAC protocols
  - **Channel partitioning**
    - 채널을 더 작은 서브채널로 나눔 (time slot, frequency, code, etc.)
    - Exclusive use를 위한 조각을 노드에 할당

  - **Random access**
    - 채널을 나누지 않고, Collision을 허용
    - 충돌이 발생하면 "Recover"

  - **Taking turns**
    - 노드는 차례를 가진다. 다만, 더 전송할 것이 있는 노드는 더 긴 차례를 가질 수 있다.  

<br>

- Channel partitioning: TDMA
  - Time Division Multiple Access (TDMA)  
  ![tdma_example][def10]
    - 순서대로 채널에 액세스
    - 매 차례바다, 각 station은 고정 길이의 **slot**을 받음 (length = 패킷 전송 시간)
    - 사용되지 않는 slots은 idle 상태
    - LAN에 6개의 station이 있는 Example  
      - Slots 1, 3, 4 : 보낼 패킷이 있음
      - Slots 2, 5, 6 : idle  

- Channel partitioning: FDMA
  - Frequency Division Multiple Access (FDMA)  
  ![fdma_example][def11]
    - 채널 스펙트럼이 **frequency bands**로 나누어짐
    - 각 station은 고정 frequency band를 받음
    - 사용되지 않는 frequency bands는 idle 상태
    - LAN에 6개의 station이 있는 Example  
      - Bands 1, 3, 4 : 보낼 패킷이 있음
      - Bands 2, 5, 6 : idle  

- Random access protocols
  - 노드가 보낼 패킷이 있을 때,  
    - `R`의 full channel rate로 전송
    - 노드 간 prior coordination 없음  
  - 두 개 이상의 전송하려는 노드가 있다면 -> "collision" 발생 가능
  - Random access MAC protocol은 다음을 정의한다.
    - 어떻게 collision을 감지할 지
    - 충돌이 발생하면 어떻게 복구할 지  

  - Examples
    - ALOHA, slotted ALOHA
    - CSMA, CSMA/CD, CSMA/CA  

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 김도형 교수님의 컴퓨터네트워크 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details>

[def]: https://orbit3230.github.io/2025/05/08/DC_week10/#3-connectionless-transport-udp
[def2]: https://i.imgur.com/SsvxmHk.png
[def3]: https://i.imgur.com/cok437b.png
[def4]: https://i.imgur.com/mgxATkj.png
[def5]: https://i.imgur.com/C3fCRhm.png
[def6]: https://i.imgur.com/pUbHBcB.png
[def7]: https://i.imgur.com/u2cjCpj.png
[def8]: https://i.imgur.com/SQEC68N.png
[def9]: https://i.imgur.com/ixXwL3S.png
[def10]: https://i.imgur.com/RN5RWD7.png
[def11]: https://i.imgur.com/pTiRseZ.png