---
layout: post
title: "[운영체제] 4주차 - Operating-system Structure III & Process I"
excerpt: ""

tags:
  - [운영체제]

toc: true

date: 2025-03-27
last_modified_at: 2025-03-27
---
## Operating-system Structure
### 1. System Services
- **System Services**
  - 시스템 프로그램은 프로그램 개발과 실행을 위한 편리한 환경을 제공한다.  
  두 가지 서비스로 나뉜다.  
  - **System-level services** & **User-level services**
  - Examples
    - 파일 조작 : create, delete, copy, rename, print, dump, list, ...
    - 파일에 저장된 상태 정보
      - date, time, 사용가능한 메모리, 디스크 공간, 사용자 수, ...
      - logging & debugging information
      - 몇몇 시스템들(windows)은 **registry**를 구현한다.  
      (환경설정 정보를 store/retrieve)
    - 프로그래밍 언어 지원 : 컴파일러, 어셈블러, 디버거, 인터프리터
    - 프로그램 로딩 & 실행 : absolute loaders, relocatable loaders, linkage editors, overlay-loaders, high-level & 기계어 디버깅 시스템  
      - Linkers and Loaders  
      ![linkers_and_loaders](TODO)  
        - 소스코드는 object file로 컴파일되어 물리적 메모리 장소에 로드된다. : **relocatable object file**
        - Linker는 이들을 하나의 binary executable file로 결합한다. (also brings in libraries)
        - 실행되기 위해서는 반드시 메모리로 가져와야 한다.
          - **Relocation**은 프로그램의 최종적인 address를 할당하고 코드와 데이터를 이 address로 adjust
        - TODO
    - 커뮤니케이션 : 프로세스, 유저, 컴퓨터 시스템 간 가상 연결을 생성하는 메커니즘 제공
    - 백그라운드 서비스
      - Launch at boot time
      - disk checking, process scheduling, error logging, printing
      - 커널 context가 아닌 user context에서 실행
      - known as services, subsystems, daemons
    - 애플리케이션 프로그램
      - 시스템에 존재하지 X
      - user가 실행
      - 일반적으로 OS의 일부로 고려되지 않음
      - 명령어, 클릭 등으로 실행

    - TODO
    - TODO

<br>

### 2. Operating System Design and Implementation
- OS의 디자인과 구현은 **not "solvable"**. 다만 검증된 접근법이 있다.
- 내부 구조는 OS마다 **매우 크게** 다르다.

<br>

- **goals**(목표)와 **specifications**(명세)를 정의 함으로서 디자인하기 시작한다.  
- 하드웨어 선택, 시스템 타입에 영향을 받는다.  
  - TODO
- TODO
- TODO

<br>

- **Policy** : **무엇을** 해야 하는가?
  - example : 4ms마다 interrupt
- **Mechanism** : **어떻게** 해야 하는가?
  - example: timer
- 중요한 Principle : **Policy와 Mechanism을 분리**  
- TODO

<br>

- **Implementation**
  - Much variation
    - 초기 OS는 어셈블리어
    - 지금은, C/C++

  - 실제로, 보통은 여러 언어의 mix
    - Lower level -> assembly
    - Main body -> C
    - System programs -> C/C++, scripting languages(PERL, Python, shell scripts)

  - 더 high-level lauguage일 수록 다른 하드웨어에 **port**하기 편하다.
    - 다만 더 느리다.  

<br>

- **Various ways to structure OS**
  - **Monolithic** (e.g., old UNIX)
    - 전혀 structure가 없거나, 제한된 structuring  
    - TODO

  - **Layered Approach** - an abstraction  
  ![layered_approach](TODO) 
    - TODO  

  - **Microkernels** (e.g., Mach)  
  ![microkernels](TODO)  
    - TODO

  - **Module** (e.g., Linux, Solaris)
    - 대부분의 현대 OS들은 **loadable kernel modules (LKMs)**를 구현한다.  
      - 객체지향 방식 사용
      - 각 core component가 분리
      - TODO
    - 전반적으로 layers와 비슷하지만, 더 유연함.
      - Linux, Solaris, etc.
    - Monolithic + modular design  
    ![monolithic_modular_design](TODO)  

<br>

## Process
### 1. Process Concept
- TODO

- TODO

- Memory Layout of a C Program  
![memory_layout_of_a_c_program](TODO)  

<br>

- **Process State**
  - 프로세스가 실행되면, **state**가 변화한다.  
  ![process_state](TODO)  
    - **New** : 프로세스가 생성되는 중
    - **Running** : 명령어가 실행되는 중
    - **Waiting** : 프로세스가 어떤 이벤트를 기다리는 중
    - **Ready** : 프로세스가 프로세서에게 할당되기를 기다리는 중
    - **Terminated** : 프로세스가 실행을 마친 상태  

  - CPU 코어 당 어느 한 시점에는 **단 하나의 프로세스만** 실행될 수 있다.  
  - 따라서, 다른 모든 많은 프로세스들은 **ready** or **waiting** 상태에 있다.  

  <br>

- **Process Control Block (PCB)**  
  - 각 프로세스와 관련된 정보 (also colled **task control block**)  
  ![process_control_block](TODO)  
    - **Process state** : running, waiting, ready, etc.
    - **Program counter** : 다음 실행할 명령어 주소
    - **CPU registers** : CPU 레지스터 값
    - **CPU scheduling information** : 우선순위, 스케줄 큐 포인터, etc.
    - **Memory-management information** : 프로세스에 할당된 메모리
    - **Accounting information** : CPU 사용량, 실제 시간 사용량, 시간 제한, etc.
    - **I/O status information** : I/O 장치 상태, 열린 파일 목록 등

    <br>

- **Thread**
  - 오랜 시간동안, 프로세스는 **single thread of execution**을 가지고 있었다.  
  - 각 프로세스 당 여러 개의 program counter를 갖는 것을 고려하기 시작했다.  
  - TODO  

  <br>

- Linux에서의 프로세스 표현  
  - `task_struct`라는 이름의 C 구조체로 표현된다.  
  ![task_struct](TODO)  

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">  

이 포스팅은 강원대학교 송원준 교수님의 운영체제 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.  

</div>
</details>