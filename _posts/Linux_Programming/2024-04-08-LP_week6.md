---
layout: post
title: "[리눅스 프로그래밍] 7주차 - Shell"
excerpt: ""

tags:
  - [리눅스 프로그래밍]

toc: true

date: 2024-04-08
last_modified_at: 2024-04-08
---
## Shell Script
- `.sh` 파일의 처음에서,
`#!`은 command interpreter를 specified 해준다.  
`#!/bin/bash`
- `#`은 주석 단어이다.  

```shell
echo "Hello world" # comment
```

### 1. Variable
#### [1] Shell Variable
- 선언이나 타입이 없다. 
- assign 되지 않은 변수의 값은 `NULL`
- Set
  - 사용 방법 : `Variable=value`
  - 변수 이름은 알파벳으로 시작
  - 이름은 오직 `a-z`,`A-Z`,`0-9` 로만 구성
  - Case-sensitive
- 참조
  - `$Variable` or `${Variable}`

#### [2] Environment Variable
- 선언
  - `export VARIABLE=value`
  - `export shellVariable` - Shell variable을 Environment variable로 전환
- 참조
  - `$VARIABLE`
- `env` 명령어는, 현재 Shell에 정의된 모든 환경변수들을 보여준다.  

#### [3] Variable Scope
- Shell variable의 범위(namespace)는 현재 Shell 세션이다.  
즉, Shell variable들은 자식 Shell 세션으로 상속되지 않는다.  

- 반면, Environment variable들은 자식 Shell 세션으로 상속된다.  
(not vice-versa. 부모 세션에서 유효하진 않음)

- 자식 세션은 `$ /bin/bash` 명령어를 통해 만들어 들어갈 수 있으며,  
다시 부모 세션으로 돌아가려면 `$ exit` 명령어를 이용한다.  
![shell_session][def]

#### [4] Pre-defined Enviroment variables
TODO

#### [5] Note
- `''` vs `""`

#### [6] Default Variable
TODO

<br>

### 2. Command line arguments
- 문자열로 해석되지 않는 Special Charater 이다. (like 형식지정자, 이스케이프 문자)
  - `$0` : The filename of the shell script
  - `$1 - $9` : Positional parameters
    - parameter란,  
    `$bash ./filename.sh p1 p2 p3 p4 p5`  
    와 같이 실행하였을 때, `p1` ~ `p5`에 해당한다.  
  - `$#` : The number of arguments
  - `$*`or`$@` : Accessing all positional parameters
  - `$$` : PID for the current shell  

  <br>

### 3. Shell arithmetic
- `+` : addition
- `-` : subtraction
- `\*` : multiplication
- `/` : integer division
- `%` : remainder  
<br>
- Shell은 모든 Shell variable들을 string으로 취급한다.  
<br>
- `expr` 명령어를 이용하여 shell에서 산술연산을 수행할 수 있다.  
  - 문자열 내에서 특정 부분을 명령어로 대체하려면, back quote (` `` `)

```shell
echo "$1 + $2 = `expr $1 + $2`"
```

<br>

### 4. Shell Logical Operation
- `==` : equal to
- `!=` : not equal to

<br>

### 5. ETC
TODO

<br>

## Shell Script 문법
### 1. IF Statement

```shell
if condition-expression
then
  # execute these commands if condition true
  command-list
else
  # execute these commands if condition false
  command-list
fi
```

- Nested-IF 문을 사용할 수도 있고,  
ELIF 문을 사용할 수도 있다.  

### 2. `test` Command
- 위 `if` 문에서와 같이 `conditional-statement` 자리에 들어갈 는 명령어이다.  
- `$ test [condition]`과 같이 사용.
- 파일의  속성, 문자열 비교, 숫자 비교 등을 test 하는 명령어이다.  
  - `[condition]`을 만족하면 `TRUE`, 그렇지 않으면 `FALSE`를 반환한다.  

#### [1] Testing file attributes
- `$ test -f file` : "file"이 존재하고, regular file인가?
- `$ test -d file` : "file"이 존재하고, directory인가?
... TODO

#### [2] Testing string attributes
TODO

#### [3] Testing numeric comparison
TODO

#### [4] More about the `test` command
TODO

<br>

### 3. CASE Statement
- 다양한 statement 가짓수가 있을 때 주로 사용한다.  
- 단 하나의 pattern만 선택 가능하다.  
- pattern으로서 `*`, `?`, `|`, `&`, 그리고 `[]` 등이 사용된다.  

```shell
case "string" in
  pattern1)
    command-list
  ;;
  pattern2)
    command-list
  ;;
  patternN)
    command-list
  ;;
esac
```

<br>

### 4. FOR loop Statement
- 사전 정의된 **list of items**에 대하여 행동을 수행한다.  

```shell
# TODO
```

```java
// TO BE CONTINUED
```

[def]: https://i.imgur.com/Dl4tjdr.png