---
layout: post
title: "[디지털영상처리] 11주차 - 영상 압축"
excerpt: "부호화, 무손실 부호화, 손실 부호화, JPEG, CAVLC"

tags:
  - [디지털영상처리]

toc: true

date: 2025-11-14
last_modified_at: 2025-11-30
---
## 영상 압축 (Image Compression)
### 1. 부호화
- 무손실 부호화(Lossless Coding)
  - 데이터 보존
  - 영상의 정확한 복원 가능
  - 주된 압축 알고리즘 후에 쓰이는 후처리 방법으로 주로 쓰임
  - 허프만 부호화, 산술 부호화, 연속 길이 부호화, 차분 부호화

- 손실 부호화(Lossy Coding)
  - 데이터의 일부분 유실
  - 영상의 정확한 복원 불가능
  - 고압축률
  - 인간의 시각에 미치는 영향을 최소화하는 방법 선택
  - 절단 부호화, 양자화, 벡터 양자화, 손실 예측부호화, 변환 부호화

<br>

### 2. 무손실 부호화
- 무손실 부호화
  - 확률을 기반으로 한 정보 이론에서 출발
  - 엔트로피(entropy) : 영상의 평균 정보량을 나타내는 지표. 데이터의 압축 한계선  
  ![entropy][def]
    - `p`<sub>`i`</sub> : `i`값을 가지는 픽셀의 발생 확률
  - 평균 픽셀 당 비트 수  
  ![average_bits_per_pixel][def2]  
    - `n`<sub>`i`</sub> : 그레이 값 `i`를 부호화하는데 필요한 비트 수
    - `p`<sub>`i`</sub> : `i`값을 가지는 픽셀의 발생 확률
  - `0` <= `엔트로피` <= `평균 픽셀 당 비트 수`  

<br>

- 허프만 부호화(Huffman Coding)
  - 자주 발생하는 자료의 표현에 작은 bit를 할당하고,  
  드물게 발생하는 자료의 표현에 큰 bit를 할당하는 가변 길이 부호화 방법  
  ![huffman_coding_example][def3]  
    - 모든 Symbol이 같은 확률을 가진다면, 고정 길이 부호화와 동일하며 엔트로피가 최대가 된다.  
    - 하나의 Symbol이 `100%` 확률을 가진다면, 허프만 부호화의 효율이 최대가 되며 엔트로피는 `0`이 된다.

<br>

- 산술 부호화(Arithmetic Coding)
  - 허프만 부호화는 최소 1 bit/symbol
    - 산술 부호화는 symbol 당 1 bit 미만도 가능  
  - 희소 값들이 가지고 있는 확률을 부호화하는 방법  
  - 허프만 부호화보다 계산량이 많음  
  ![arithmetic_coding_example][def4]  
    - Symbol의 개수만 알면 Decoding 가능하다. (Encoding과 같은 방식으로)  

<br>

- 연속 길이 부호화(Run-Length Coding)
  - 연속 길이(Run-Length) : 같은 그레이 값을 가지고 연속적으로 나오는 픽셀의 개수  
  - 연속 길이를 부호화하는 방법  
  ![run_length_coding_example][def5]  

  <br>

- 차분 부호화(Differential Coding), 무손실 예측 부호화(Lossless Predictive Coding)
  - 영상에 포함되어있는 정보들의 대부분은 저주파(Low Frequency) 성분
    - 인접한 화소들끼리 비슷한 값을 갖는 중복성(Redundancy) 존재  
  - 인접 화소들의 값을 이용하여 현재 화소에 대한 예측치를 구한 후, 이 예측치와 현재 화소값과의 차이를 최소화  
  ![differential_coding_example][def6]  

  - 차분 부호화의 예시  
  ![differential_coding_example2][def7]  

<br>

### 3. 손실 부호화
- 절단 부호화(Truncation Coding)
  - 공간 해상도를 줄이는 방법 : 다운샘플링(Down-Sampling)  
  -> 영상 복원 : 선형 인터폴레이션(Linear Interpolation)  
  ![down_sampling_example][def8]  

  - 밝기 해상도를 줄이는 방법 : 화소 값을 표현하는데 사용되는 비트 중 중요한 정보를 가지고 있는 상위 비트는 그대로 두고, 하위 비트만을 제거 (bit-plane)  
  -> 영상 복원 : 없어진 비트를 noise 패턴으로 채움  
  ![bit_plane_example][def12]  

  - Example  
  ![truncation_coding_example][def13]  

  <br>

- 벡터 양자화(Vector Quantization)
  - Pattern Matching : 일치되는 것이 없으면 가장 가까운 값 선택  
  - Codebook의 index로 압축, 복원  
  - Example  
  ![vector_quantization_example_1][def9]  
  ![vector_quantization_example_2][def10]  
  ![vector_quantization_example_3][def11]  

<br>

### 4. JPEG
- JPEG (Joint Photographic Experts Group)
  - ADCT (Adaptive Discrete Cosine Transform) 기반의 손실 압축 표준  
  ![jpeg_encoding_process][def14]  

<br>

- DCT와 양자화 Example  
![dct_quantization_example][def15]  

<br>

### 5. CAVLC
- CAVLC (Context Adaptive Variable Length Coding)
  
- CAVLC의 Coding Flow  
![cavlc_coding_flow][def18]  

- CAVLC Encoding Example  
![cavlc_example][def17]  
  - 위와 같은 스캔 방식이 아닌, 한 줄씩 스캔하는 방법을 레스터 스캔(Raster Scan)이라고 한다.  
    - 그러나 레스터 스캔은 저주파와 고주파 성분을 왔다갔다 하기 때문에, 효율이 떨어진다.
  - 따라서, JPEG와 마찬가지로 저주파 성분을 우선적으로 스캔하는 지그재그 스캔 방식을 사용한다.  
  - `TotalCoeffs` : 블록 내에서 `0`이 아닌 계수의 개수  
  - `TrailingOnes`(`T1s`) : `0`을 무시하고, 끝에서부터 세었을 때 처음으로 만난 연속된 `1` 또는 `-1`인 계수의 개수 (최대 3)  

- `TotalCoeffs` & `TrailingOnes` 테이블  
![cavlc_totalcoeffs_trailingones_table][def16]  

- Lookup 테이블을 선택하는 방법  
![cavlc_lookup_table_selection][def19]  
  - 만약 `N`<sub>`u`</sub>와 `N`<sub>`L`</sub>가 존재한다면,  
  `N` = `(N`<sub>`u`</sub> + `N`<sub>`L`</sub>`)` / `2`
  - 만약 `N`<sub>`u`</sub> 만 존재한다면,  
  `N` = `N`<sub>`u`</sub>
  - 만약 `N`<sub>`L`</sub> 만 존재한다면,
  `N` = `N`<sub>`L`</sub>  

- Encoding TotalZeros
  - `TotalZeros` : 마지막 `0`이 아닌 계수 이전의 `0`의 개수 합  
  ![cavlc_totalzeros_table][def20]  

- Encoding (ZeroLeft, run_before)  
  - 각 `0`들을 인코딩하는 방법  
  ![cavlc_run_before_table][def21]  

<br>

- CAVLC Decoding Example  
![cavlc_decoding_example][def22]  

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 김윤 교수님의 디지털영상처리 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details>

[def]: https://i.imgur.com/ibiKMk1.png
[def2]: https://i.imgur.com/FeAdHCc.png
[def3]: https://i.imgur.com/rElqR3g.png
[def4]: https://i.imgur.com/KsYHiw7.png
[def5]: https://i.imgur.com/LbJPmcy.png
[def6]: https://i.imgur.com/uBPnLTK.png
[def7]: https://i.imgur.com/215l7cR.png
[def8]: https://i.imgur.com/sluxoUX.png
[def9]: https://i.imgur.com/yIboRO8.png
[def10]: https://i.imgur.com/eKjnTVk.png
[def11]: https://i.imgur.com/k4TkzX4.png
[def12]: https://i.imgur.com/gQFpgQo.png
[def13]: https://i.imgur.com/bgIdzfU.png
[def14]: https://i.imgur.com/kbhlJEt.png
[def15]: https://i.imgur.com/ykTZrr5.png
[def16]: https://i.imgur.com/eAVJUWF.png
[def17]: https://i.imgur.com/PqVbnzL.png
[def18]: https://i.imgur.com/HsEfz36.png
[def19]: https://i.imgur.com/slWVYxt.png
[def20]: https://i.imgur.com/NNCr0w3.png
[def21]: https://i.imgur.com/2x38xNT.png
[def22]: https://i.imgur.com/dCvI8BS.png