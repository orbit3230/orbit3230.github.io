---
layout: post
title: "[프로그래밍 언어] 10주차 (2) - 변경 가능한 상태"
excerpt: "Why need mutable state?, 문법 구조, 예제"

tags:
  - [프로그래밍 언어, Rust]

toc: true

date: 2025-05-07
last_modified_at: 2025-05-07
---
## 변경 가능한 상태 (Mutable State)
### 1. Why need mutable state?
- 프로그램이 실행되는 동안 함수 `f`가 몇 번 호출되는 지 알고싶을 수 있다.
  - 다음과 같이 작성하면 어떻게 될까?  

  ```rust
  let counter = 0 in
  let f = fun x ->
    (let counter = counter + 1 in x)
  in
  let a = f (f 1) in
  counter
  ```

  - 위 코드의 함수 `f` 내 `counter`는 새로운 지역변수이므로,  
  `counter`의 값은 항상 0이다.  

  <br>

- 변경 가능한 상태를 사용하려면, 프로그래밍 언어에서 **side effect**를 지원해야 한다.

- Effects는 메모리(memory, store)와 주소(location, reference)를 이용하여 구현 가능하다.  

- 계산 효과(Computational Effect)  
-> 프로그래밍 언어에서 effects는 명시적(explicitly) 또는 암시적(implicitly)으로 지원된다.
  - ML처럼 명시적인 참조(explicit reference)를 지원하는 언어에서는  
  메모리 할당(allocation) 및 메모리에 저장된 값을 읽어오거나(dereference) 값을 변경(mutation)하기 위한 별도의 연산을 제공
  - C나 Java처럼 암시적 참조(implicit reference)를 지원하는 언어에서는  
  이와 같은 연산들이 내장되어 있음  

  <br>

### 2. 문법 구조
- 명시적 참조를 지원하는 언어 `λ`<sub>`exp`</sub><sup>`ref`</sup>  
![ref][def]
  - `ref E`는 새로운 주소를 할당받아, 그 주소에 `E`를 계산한 값을 저장
  - `!E`는 `E`가 가리키는 주소에 저장되어 있는 값을 반환
  - `E`<sub>`1`</sub> := `E`<sub>`2`</sub>는 `E`<sub>`1`</sub>이 가리키는 주소에 저장되어 있는 값을 `E`<sub>`2`</sub>로 변경

<br>

### 3. 예제
![ref_example_1][def2]  
- 결과는 `-1`

![ref_example_2][def3]
- 결과는 `-1`

![ref_example_3][def4]  
- 결과는 `0`  


<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 임현승 교수님의 프로그래밍 언어 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details>

[def]: https://i.imgur.com/2XFZCHu.png
[def2]: https://i.imgur.com/VzlLdJZ.png
[def3]: https://i.imgur.com/86ogLJU.png
[def4]: https://i.imgur.com/HwcMiaq.png