---
layout: post
title: "[컴퓨터구조] 3주차 - Performance II"
excerpt: "Execution Time, Timer, Performance Counters"

tags:
  - [컴퓨터구조]

toc: true

date: 2025-09-17
last_modified_at: 2025-09-17
---
## Performances
### 1. (Review+) Execution Time
- 세 가지 서로 다른 종류의 시간
  - Elapsed time (a.k.a. wall-clock time)
    - 실제 시간에 기반 (계속적으로 흐름)
    - 모든 다른 활동에서의 시간을 포함

  - CPU time (a.k.a. virtual process time)
    - 프로세스가 실행된 시간 (CPU가 활성화 된)
      - user time + system time
    - 프로세스가 기다린 시간은 포함하지 않음

  - Parallel execution time
    - 멀티-코어 & 멀티 쓰레드 실행 환경
    - 병렬 바트가 실행될 때마다 동작
    - global time bases를 정의할 필요가 있음
    - 차후 다룰 예정  

<br>

- 특정 프로그램 or Task에 대한 execution time을 어떻게 측정할 수 있을까?  

<br>

### 2. Timer  
- `gettimeofday()`
  - UNIX 함수
  - 초/마이크로초 단위로 wall-clock time 반환
  - 실제 resolution(정확도)는 Hardware-dependent
  - Base : 1970년 1월 1일 00:00:00 UTC  

- `clock_gettime()`
  - POSIX 함수
  - `clock_id CLOCK_REALTIME` : 초/나노초 단위로 wall-clock time 반환
  - 더 많은 시간드리 구현되어 있지만 표준화 X
  - 실제 resolution(정확도)는 Hardware-dependent  

- `getusage()`  
  - UNIX 함수
  - 다양한 정보를 제공
    - user time, system time, memory usage, page faults, etc.
    - 제공되는 정보는 system-dependent  

- TSC (Time Stamp Counter)
  - H/W counter
  - clock cycle (or tick)을 카운트
  - `x86` 에서 `RDTSC` 명령어 (`EDX:EAX` 레지스터에 결과 저장)  
  ![RDTSC][def]  

  <br>

- Typical Usage
  - (1) Measurement start
  - (2) 측정하고자 하는 코드 실행
  - (3) Measurement end  
  - (4) (3) - (1) = Elapsed time  

- Example  
![Timer Example][def2]  

<br>

### 3. Performance Counters
- 특정 성능 이벤트를 카운트하기 위해 추가된 프로세서 로직  
  - Performance events : instructions, cycles, cache misses, cache hits, ...

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">  

이 포스팅은 강원대학교 송원준 교수님의 컴퓨터구조 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.  

</div>
</details>

[def]: https://i.imgur.com/WPXBPnS.png
[def2]: https://i.imgur.com/OOlxVC6.png