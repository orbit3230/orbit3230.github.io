---
layout: post
title: "[컴퓨터 애니메이션] 15주차 - Animation with Motion Capture"
excerpt: "Electromagnetic Mocap, Electromechanical Mocap, Optical Mocap, Video-based Mocap, Mocap Pipeline, Motion Capture Data Files, Bone Transform"

tags:
  - [컴퓨터 애니메이션]

toc: true

date: 2025-12-09
last_modified_at: 2025-12-09
---
## Animation with Motion Capture
### 1. Electromagnetic Mocap  
![electromagnetic_mocap][def]  
- 관절에 센서를 부착하여 각 센서가 3D 위치와 방향을 측정
  - Full-body 모션 캡처는 최소 15개의 센서 필요

- 장점
  - 3D 위치와 방향을 측정할 수 있음
  - Occlusion 문제 없음 (여러 대상을 동시에 추적 가능)
  - 따라서 동시에 여러 명의 배우를 캡처 가능

- 단점
  - 센서가 자석 간섭에 민감
  - 캡처 볼륨이 제한적
  - Capture deformation을 할 수 없음 (facial expression)
  - 작은 움직임을 포착하기 어려움 (finger movements)
  - Optical Mocap에 비해 정확도가 낮음  

<br>

### 2. Electromechanical Mocap  
![electromechanical_mocap][def2]
- 관절에 센서를 부착하여 각 센서가 3D 방향을 측정 (3D accelerometer + 3D gyroscope, 3D magnetometer)
  - Full-body 모션 캡처는 최소 15개의 센서 필요

- 장점
  - 3D 방향 측정 가능
  - Occlusion 문제 없음 (여러 대상을 동시에 추적 가능)
  - 따라서 동시에 여러 명의 배우를 캡처 가능
  - 큰 캡처 볼륨
  - 휴대성이 좋고 야외 촬영 가능

- 단점
  - 3D 위치 정보를 얻는 것이 쉽지는 않음
  - Root 위치는 ultrasonic position sensor로 측정해야 함
  - Capture deformation을 할 수 없음 (facial expression)
  - 작은 움직임을 포착하기 어려움 (finger movements)

<br>

### 3. Optical Mocap  
![optical_mocap][def3]  
- 여러 개의 Calibrated Camera(8개 이상)로 여러 방향의 영상을 촬영
  - Retro-reflective marker를 장착
  - Marker의 3D 위치를 정확히 측정

- 장점
  - 3D 위치와 방향을 측정할 수 있음
  - 매우 정확한 캡처 가능 
  - 매우 높은 프레임 레이트
  - 매우 디테일한 움직임 포착 가능 (finger movements, facial expressions)

- 단점
  - Occlusion 문제
  - 여러 배우들 간의 인터랙션을 캡처하기 어려움
  - 캡처 볼륨이 제한적
  - Expensive  

<br>

### 4. Video-based Mocap
- 하나의 Video Streams로부터 3D 퍼포먼스를 캡처

- 장점
  - 언제 어디서나 촬영 가능
  - 매우 저렴

- 단점
  - Mature technology는 아님.
  - 퀄리티가 다른 모션 캡처 방식에 비해 그렇게 좋은 편은 아님

<br>

### 5. Mocap Pipeline
- Optical Mocap Pipeline
  - Planning
  - Calibration
  - Data Processing  

<br>

- Planning
  - 모션 캡처는 매우 Serious한 계획이 필요
  - 데이터가 어떻게 얻어질 지를 미리 예상해야 함
  - Garbage In, Garbage Out
  - Movement Flowchart for Games  
  ![movement_flowchart_for_games][def4]  

  - Character/prop 준비
    - 캐릭터의 Skeleton topology를 미리 정의
  - Marker 준비
    - Marker의 개수와 위치를 미리 정의  

<br>

- Calibration
  - Camera Calibration
    - 각 카메라의 위치와 방향을 결정 (Extrinsic parameters)
    - 카메라 매개변수(e.g., focal length)를 결정 (Intrinsic parameters)

  - Subject Calibration
    - 배우의 Skeleton 크기를 결정
    - Marker의 상대적인 위치를 결정
    - Prop의 크기와 위치를 결정

<br>

- Processing Markers
  - 각 카메라는 캡처 세션을 기록
  - Extraction : 마커는 이미지에서 식별되어야 함
    - 2D 위치를 결정
    - 문제 : **occlusion**, 보이지 않는 마커

  - 마커는 Labeled 되어야 함
    - 어느 마커가 어디에 해당하는 지?
    - 문제 : crossover, 마커의 label이 바뀌는 현상

  - 3D 위치 계산 : 만약 마커가 적어도 2개의 카메라에 보인다면, 삼각측량법으로 3D 위치 계산 가능

<br>

- Data Process  
![data_process][def5]  

<br>

### 6. Motion Capture Data Files
- Human motion data의 각 시퀀스는 두 개의 파일을 포함한다.
  - Skeleton file(`.asf`) : 캐릭터의 skeleton model을 specify
    - 각 뼈에 대한 정보가 들어있다. (길이, 방향, local coordinate, 자유도 등등)
  - Motion data file(`.amc`) : Frame/time 에 걸친 joint angle 값을 specify
  - 위 두 파일 모두 Vicon 소프트웨어로 생성 가능  

- Human Skeleton Model  
![human_skeleton_model][def6]  

<br>

### 7. Bone Transform
- From Local Coordinate to World Coordinate  
![bone_transform][def7]  

- Bone Transform  
![bone_transform_equation][def8]  

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 김종민 교수님의 컴퓨터 애니메이션 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details> 

[def]: https://i.imgur.com/3kU9528.png
[def2]: https://i.imgur.com/treoZP4.png
[def3]: https://i.imgur.com/Fuf80mW.png
[def4]: https://i.imgur.com/RR59IU4.png
[def5]: https://i.imgur.com/rpj6vVw.png
[def6]: https://i.imgur.com/8lSN82U.png
[def7]: https://i.imgur.com/C3WDPvl.png
[def8]: https://i.imgur.com/wxGIHrf.png