---
layout: post
title: "[컴퓨터 애니메이션] 12주차 - Kinematics"
excerpt: "Forward & Inverse Kinematics"

tags:
  - [컴퓨터 애니메이션]

toc: true

date: 2025-11-18
last_modified_at: 2025-11-25
---
## Kinematics
- Kinematics : The study of movement without the consideration of the masses or forces that bring about the motion.  

- Degrees of Freedom (DoF) : 물체의 포즈를 결정하는 독립적인 displacement의 집합

### 1. Forward & Inverse Kinematics
- Forward Kinematics  
![forward_kinematics][def]
  - Joint angles → End-effector position  
  - Joint angles(`θ`<sub>`1`</sub>, `θ`<sub>`2`</sub>, ..., `θ`<sub>`n`</sub>)를 조절하여 전체 pose를 조절하는 방법이다.
  - 각도를 일일이 조절해야하는 번거로움이 있다.

- Inverse Kinematics  
![inverse_kinematics][def2]
  - End-effector position → Joint angles  
  - End-effector position(`p`<sub>`1`</sub>, `p`<sub>`2`</sub>, ..., `p`<sub>`m`</sub>)를 조절하여 전체 pose를 조절하는 방법이다.
  - 원하는 위치에 End-effector를 놓으면, 나머지 joint angles가 자동으로 계산된다.
  - Non-linear system이다.
    - Non-linear system은 iterative하게 해결해야 한다.  

  - example  
  ![inverse_kinematics_example][def5]
    - 이 방식을 Analytic Solution이라고 한다.  
    그러나 이 방식은 링크가 많아질 수록 해결하기 어려워진다.

  

    <br>

### 2. Forward Kinematics
- Simple Example: 2-dimensional space에 있는 robot arm  
  - 2 revolute joints (회전 관절)
  - Joint angle은 알고 있다.
  - End-effector position을 구하는 것이 목표이다.  
  ![forward_kinematics_example][def3]  

  - A Chain of Transformations  
  ![forward_kinematics_matrix_chain][def4]  

<br>

### 3. Inverse Kinematics
- Analytic Solution  
![inverse_kinematics_example][def5]
  - 그러나 이 방식은 링크가 많아질 수록 해결하기 어려워진다.

- Iterative Approaches  
  - hypothesized position(추정된 위치)과 specified position(지정된 위치) 사이의 오차(residual, distance)를 최소화하는 joint angle(`θ`)를 찾는 방법  
  ![inverse_kinematics_iterative_1][def6]  

  - 현재 변수는 `θ`<sub>`1`</sub>, `θ`<sub>`2`</sub> 로 두 개이고, `Ax = b`에서 `b`에 해당하는 것은 `c`<sub>`1`</sub>, `c`<sub>`2`</sub> (specified position) 이다.  
  ![inverse_kinematics_iterative_2][def7]  

  - Gauss-Newton 방식을 사용하여 오차를 최소화하는 `Δθ`를 구할 수 있다.
    - Step 1 : joint angle `θ` initialize
    - Step 2 : 수렴할 때 까지 업데이트 `θ`<sup>`k+1`</sup> = `θ`<sup>`k`</sup> + `Δθ`<sup>`k`</sup>  
    ![inverse_kinematics_iterative_3][def8]  
      - 우리가 알고 있는 것은 `θ`<sup>`k`</sup>와 `c` (specified position) 이다.  
      테일러 1차 근사를 사용한 식을 다시 써보면,  
      ![inverse_kinematics_iterative_4][def9]  
      ![inverse_kinematics_iterative_5][def10]  

    - Gradient가 `0`일 때 optimal value를 가진다.  
    `J Δθ` = `b` 형태의 Linear System을 풀면 된다.  
    ![inverse_kinematics_iterative_6][def11]  
      - 여기서 `J`는 `m`x`n` Jacobian matrix.  
      `m`은 식의 개수, 즉 Work space이며, dimension, end-effector position이 속한 공간의 차원이다.  
      `n`은 변수의 개수, 즉 Configuration space(Degrees of Freedom)이며, joint angle의 개수이자 링크의 개수이다.  
      - 일반적으로 `m` < `n` 이다. 이는 Under-determined system이다. 따라서 pseudo-inverse는 `(J`<sup>`T`</sup>`J)`<sup>`-1`</sup>`J`<sup>`T`</sup> 가 아닌 `J`<sup>`T`</sup>`(JJ`<sup>`T`</sup>`)`<sup>`-1`</sup> 를 사용한다.  
      - Jacobian matrix `J`의 각 원소는 다음과 같이 계산된다.  
      ![inverse_kinematics_iterative_7][def12]  
      ![inverse_kinematics_iterative_8][def13]  

      - 여기서 Step size를 조절하여 수렴 속도를 조절할 수 있다.  
      ![inverse_kinematics_iterative_9](TODO)  

      - 값의 변화가 Threshold 이하가 되거나, 반복 수가 일정 수 이상이 되면 종료한다.  

<br>

- Inverse Kinematics의 Ambiguity
  - Solution이 여러 개 존재할 수 있다.  
  ![inverse_kinematics_ambiguity_multiple](TODO)

  - Solution이 무한히 많을 수 있다.  
  ![inverse_kinematics_ambiguity_infinite](TODO)  

  - Solution이 존재하지 않을 수 있다.  
  ![inverse_kinematics_ambiguity_none](TODO)  

- TODOS  

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 김종민 교수님의 컴퓨터 애니메이션 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details> 

[def]: https://i.imgur.com/jrFe3cG.png
[def2]: https://i.imgur.com/Y2T6iRh.png
[def3]: https://i.imgur.com/HWCtuJu.png
[def4]: https://i.imgur.com/7wCrumI.png
[def5]: https://i.imgur.com/ltGRcRf.png
[def6]: https://i.imgur.com/W63pTI4.png
[def7]: https://i.imgur.com/vEU0BK0.png
[def8]: https://i.imgur.com/dhq2lRC.png
[def9]: https://i.imgur.com/cmsO2ad.png
[def10]: https://i.imgur.com/ibGBLNP.png
[def11]: https://i.imgur.com/sGTTNsJ.png
[def12]: https://i.imgur.com/fVamqlI.png
[def13]: https://i.imgur.com/CKFaniz.png