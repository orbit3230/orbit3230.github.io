---
layout: post
title: "[데이터베이스] 2주차 - 관계 데이터 모델"
excerpt: "관계 데이터 모델의 개념, 키, 무결성 제약 조건, 관계대수"

tags:
  - [데이터통신]

toc: true

date: 2025-09-08
last_modified_at: 2025-09-15
---
## 관계 데이터 모델
### 1. 관계 데이터 모델의 개념
- 데이터 모델 : 데이터를 구조적으로 저장/관리하기 위한 정의들
  - 데이터 구조 : Structure
  - 데이터 간의 관계 : Relationship
  - 제약 조건 : Constraint
  - 연산 : Operation  

<br>

- 릴레이션 : 테이블  
![relation_table][def]  
  - 릴레이션 스키마(relation schema) : 릴레이션의 구조(속성, 도메인, 차수)를 정의한 것. 불변. a.k.a.내포(intension)  
  `릴레이션 이름(속성1 : 도메인1, 속성2 : 도메인2, ..., 속성n : 도메인n)`  
  `도서(도서번호:integer, 도서이름:char(40), 출판사: char(20), 가격:integer)`  
    - 속성(attribute) : 릴레이션 스키마의 열
    - 도메인(domain) : 속성이 가질 수 있는 값의 집합
    - 차수(degree) : 속성의 개수
  
  - 릴레이션 인스턴스(relation instance) : 릴레이션 스키마에 실제로 저장된 데이터의 집합. 가변. a.k.a.외연(extension)  
    - 튜플(tuple) : 릴레이션 인스턴스의 행
    - 카디널리티(cardinality) : 튜플의 개수

<br>

- 릴레이션의 특징
  - (1) 속성은 단일 값을 가진다.
  - (2) 속성은 서로 다른 이름을 가진다.
  - (3) 한 속성의 값은 모두 같은 도메인 값을 가진다.
  - (4) 속성의 순서는 중요하지 않다.
  - (5) 릴레이션 내의 중복된 튜플은 허용되지 않는다.
  - (6) 튜플의 순서는 중요하지 않다.  

<br>

- 관계(relationship)
  - 릴레이션(테이블) 내에서 생성되는 관계 : 릴레이션 내 데이터들의 관계
  - 릴레이션(테이블) 간에 생성되는 관계 : 릴레이션 간의 관계  
  ![relation][def2]  

  <br>

### 2. 키
- 키 : 특정 튜플을 식별할 때 사용하는 속성 or 속성의 집합

  - 슈퍼키 : 튜플을 유일하게 식별할 수 있는 속성 or 속성의 집합  

  - 후보키 : 튜플을 유일하게 식별할 수 있는 속성의 최소 집합  
    - 복합키 : 두 개 이상의 속성으로 구성된 키

  - 기본키 : 후보키 중에서 대표로 선택된 키
    - 릴레이션 내 튜플을 식별할 수 있는 고유한 값을 가져야 함
    - NULL 값을 가질 수 없음
    - 키 값의 변동이 없어야 함
    - 가능한 적은 수의 속성으로 구성되어야 함
    - 향후 문제 발생 소지가 없어야 함

  - 대리키 : 기본키가 보안을 요하거나, 너무 복잡하거나, 마땅한 기본키가 없을 때 임의로 추가하는 키  
  a.k.a. 인조키
    - DBMS가 임의로 생성하므로, 사용자가 직관적으로 의미를 알 수 없음  

  - 대체키 : 기본키로 선정되지 않은 후보키

  - 외래키 : 다른 릴레이션의 기본키를 참조하는 속성 or 속성의 집합  
  ![foreign_key][def3]  
    - 관계 데이터 모델의 릴레이션 간의 관계를 포함
    - 다른 릴레이션의 기본키를 참조하는 속성
    - 참조하는 외래키와 참조되는 기본키의 도메인은 동일해야 함
    - 기본키 값이 변경되면 이를 참조하는 외래키의 값도 변경됨
    - NULL 값과 중복 값 등이 허용됨
    - 자기 자신의 기본키를 참조하는 외래키도 가능  
    ![self_foreign_key][def4]  
    - 외래키가 기본키의 일부가 될 수 있음

  <br>

- summary  
![key_summary][def5]  

### 3. 무결성 제약 조건
- 데이터 무결성 : 데이터베이스에 저장된 데이터의 일관성과 정확성을 지키는 것

- 도메인 무결성 제약조건 : 릴레이션 내 튜플들이 각 속성의 도메인에 속하는 값을 가져야 함
  - a.k.a. 도메인 제약(domain constraint)

- 개체 무결성 제약 조건 : 릴레이션은 기본키를 지정하고 그에따른 무결성 원칙(기본키 속성은 NULL 값을 가질 수 없음, 릴레이션 내에 오직 하나의 값만 가짐)을 따라야 함
  - a.k.a. 기본키 제약(primary key constraint)

- 참조 무결성 제약조건 : 자식 릴레이션의 외래키는 부모 릴레이션의 기본키와 도메인이 동일해야하며, 자식 릴레이션의 값이 변결될 때 부모 릴레이션의 제약을 받음
  - a.k.a. 외래키 제약(foreign key constraint)  

<br>

#### [1] 개체 무결성 제약 조건
- 삽입 : 기본키 값이 같으면 삽입이 금지됨.
- 삭제 : 특별한 확인이 필요하지 않음. 즉시 수행  
- 수정 : 기본키 값이 같거나 NULL 값으로 수정하는 것이 금지됨.

<br>

#### [2] 참조 무결성 제약 조건
- 삽입
  - 부모 릴레이션 : 튜플 삽입 후 수행하면 정상적으로 진행
  - 자식 릴레이션 : 참조 받는 테이블에 외래키 값이 없으면 삽입이 금지됨.
- 삭제
  - 부모 릴레이션 : 참조하는 테이블을 같이 삭제할 수 있어서 금지하거나 다른 추가 작업이 필요
    - 작업 중지 (`RESTRICT`)
    - 자식 릴레이션의 관련 튜플 삭제 (`CASCADE`)
    - 기본 값으로 변경 (`DEFAULT`)
    - NULL 값으로 변경 (`NULL`)
  - 자식 릴레이션 : 특별한 확인이 필요하지 않음. 즉시 수행
- 수정
  - 삽입과 삭제 명령이 연속해서 수행
  - 부모 릴레이션의 수정이 일어날 경우 삭제 옵션에 따라 처리된 후 문제가 없으면 다시 삽입 제약조건에 따라 처리  

  <br>

### 4. 관계대수
- 관계대수(relational algebra) : 릴레이션에서 원하는 결과를 얻기 위해 수학의 대수와 같은 연산을 이용하여 질의하는 방법을 정의한 것  

- 관계대수 연산자  
![relational_algebra_operators][def6]  

- 관계대수식(relational algebra expression) : 관계대수 연산자와 릴레이션을 이용하여 원하는 결과를 얻기 위한 식  
  - 단항 연산자 : `연산자<조건> 릴레이션`
  - 이항 연산자 : `릴레이션1 연산자<조건> 릴레이션2`  

- 관계대수식의 사용 예  
![relational_algebra_expression][def7]  

<br>

#### [1] 셀렉션(Selection)
- 릴레이션의 튜플을 추출하기 위한 단항 연산. 찾으려는 튜플의 조건을 명시하고 그 조건에 만족하는 튜플을 반환  
`σ`<sub>`<조건>`</sub>`(R)`  
![selection][def8]  

- 셀렉션의 확장 : `σ`<sub>`<복합조건>`</sub>`(R)`  
- `AND` : `σ`<sub>`<조건1> ∧ <조건2>`</sub>`(R)`  
- `OR` : `σ`<sub>`<조건1> ∨ <조건2>`</sub>`(R)`  
- `NOT` : `σ`<sub>`¬<조건>`</sub>`(R)`  

<br>

#### [2] 프로젝션(Projection)  
- 릴레이션의 속성을 추출하기 위한 단항 연산.  
`π`<sub>`<속성1, 속성2, ..., 속성n>`</sub>`(R)`  
![projection][def9]  

- 중복을 제거한다.  

<br>

#### [3] 합집합
- 두 개의 릴레이션을 합하여 하나의 릴레이션을 반환. 이 때 두 개의 릴레이션은 서로 같은 속성 순서와 도메인을 가져야 함.(compatible)  
`R ∪ S`  
![union][def10]  

<br>

#### [4] 교집합
- Compatible한 두 릴레이션을 대상으로 하며, 두 릴레이션이 공통으로 가지고 있는 튜플을 반환.  
`R ∩ S`  
![intersection][def11]  

<br>

#### [5] 차집합  
- 첫 번째 릴레이션에는 속하고 두 번째 릴레이션에서는 속하지 않는 튜플을 반환  
`R - S`  
![difference][def12]  

<br>

#### [6] 카티션 프로덕트(Cartesian Product)  
- 두 릴레이션을 연결시켜 하나로 합침. 결과 릴레이션은 첫 번째 릴레이션의 오른쪽에 두 번째 릴레이션의 모든 튜플을 순서대로 배열하여 반환. 결과 릴레이션의 차수는 두 릴레이션의 차수의 합이며, 카디날리티는 두 릴레이션의 카디날리티의 곱.  
`R × S`  
![cartesian_product][def13]  

<br>

#### [7] 조인(Join) ★ 
- 두 릴레이션의 공통 속성을 기준으로 속성 값이 같은 튜플을 수평으로 결합하는 연산. 두 릴레이션의 조인에 참여하는 속성은 동일한 도메인을 가져야 함. 결과로서 공통 속성의 속성 값이 동일한 튜플만을 반환.  
`R ⨝`<sub>`c`</sub>` S` = `σ`<sub>`c`</sub>`(R × S)`  

- (1) 세타 조인(theta join, `θ`) : 조인에 참여하는 두 릴레이션의 속성 값을 비교하여 조건을 만족하는 튜플만 반환.  
`R ⨝`<sub>`(r 조건 s)`</sub>` S` (`r`은 `R`의 속성, `s`는 `S`의 속성)  

- (2) 동등 조인(equi join) ★ : 세타 조인에서 `=` 연산자를 사용한 조인. Default.  
`R ⨝`<sub>`(r = s)`</sub>` S`  
![equi_join][def14]  

- (3) 자연 조인(natural join) : 동등 조인에서 조인에 참여한 속성이 두 번 나오지 않도록 두 번째 속성을 제거한 조인.  
`R ⨝`<sub>`N(r, s)`</sub>` S`  
![natural_join][def15]  

- (4) 외부 조인(outer join) : 자연조인 시 조인에 실패한 튜플을 모두 보여주되, 값이 없는 대응 속성에는 NULL 값을 채워서 반환하는 조인.  
  - 왼쪽(left) 외부 조인 - `R ⟕`<sub>`(r, s)`</sub>` S`  
  ![left_outer_join][def16]  
  - 완전(full) 외부 조인 - `R ⟗`<sub>`(r, s)`</sub>` S`  
  - 오른쪽(right) 외부 조인 - `R ⟖`<sub>`(r, s)`</sub>` S`  

  - Examples  
  ![outer_join_examples][def17]  

- (5) 세미 조인(semi join) : 자연조인을 한 후 두 릴레이션 중 한쪽 릴레이션의 결과만 반환하며, 기호에서 닫힌 쪽 릴레이션의 튜플만 반환.  
`R ⋉`<sub>`(r, s)`</sub>` S`  
![semi_join](TODO)  

<br>

#### [8] 디비전(Division)  
- 릴레이션의 속성 값의 집합으로 연산을 수행.  
`R ÷ S`  
![division](TODO)  

<br>
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 최황규 교수님의 데이터베이스 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details>

[def]: https://i.imgur.com/Wr2KpGp.png
[def2]: https://i.imgur.com/eeSMEHH.png
[def3]: https://i.imgur.com/sboDBok.png
[def4]: https://i.imgur.com/v8Dp7cX.png
[def5]: https://i.imgur.com/cKhGVcA.png
[def6]: https://i.imgur.com/xGCjiSP.png
[def7]: https://i.imgur.com/FMkrRAT.png
[def8]: https://i.imgur.com/yJVbvM6.png
[def9]: https://i.imgur.com/zZiblm8.png
[def10]: https://i.imgur.com/frsQVgm.png
[def11]: https://i.imgur.com/3Pk4sUt.png
[def12]: https://i.imgur.com/PhKtJ8v.png
[def13]: https://i.imgur.com/YpOO1aB.png
[def14]: https://i.imgur.com/FLaw2GH.png
[def15]: https://i.imgur.com/k25JeeA.png
[def16]: https://i.imgur.com/qQJKeny.png
[def17]: https://i.imgur.com/LOcNVGn.png