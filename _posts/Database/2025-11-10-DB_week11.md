---
layout: post
title: "[데이터베이스] 11주차 - 정규화"
excerpt: ""

tags:
  - [데이터베이스]

toc: true

date: 2025-11-10
last_modified_at: 2025-11-10
---
## 정규화
### 1. 이상현상
- 잘못 설계된 데이터베이스는 이상현상(anomaly)을 초래할 수 있다.  
![anomaly_example](TODO)  
  - 삭제이상(deletion anomaly)
    - 튜플 삭제 시 같이 저장된 다른 정보까지 연쇄적으로 삭제되는 현상
    - 연쇄 삭제(triggered deletion) 문제 발생

  - 삽입이상(insertion anomaly)
    - 튜플 삽입 시 특정 속성에 해당하는 값이 없어 `NULL`값을 입력해야 하는 현상  
    - `NULL`값 분제 발생

  - 수정이상(update anomaly)
    - 튜플 수정 시 중복된 데이터의 일부만 수정되어 데이터 불일치가 발생하는 현상
    - 불일치(inconsistency) 문제 발생  

<br>

- `Summer` 테이블 생성  

```sql
DROP TABLE Summer;

CREATE TABLE Summer (
    sid NUMBER,
    class VARCHAR2(20),
    price NUMBER,
);

INSERT INTO Summer VALUES (100, 'FORTRAN', 20000);
INSERT INTO Summer VALUES (150, 'PASCAL', 15000);
INSERT INTO Summer VALUES (200, 'C', 10000);
INSERT INTO Summer VALUES (250, 'FORTRAN', 20000);

SELECT * FROM Summer;
```

![summer_table](TODO)  

<br>

- 삭제이상
  - `200`번 학생의 계절학기 수강신청을 취소  

  ```sql
  SELECT price 'C 수강료'
  FROM Summer
  WHERE class = 'C';
  ```

  ```sql
  DELETE FROM Summer
  WHERE sid = 200;

  SELECT price 'C 수강료'
  FROM Summer
  WHERE class = 'C';  -- C 수강료 정보 삭제됨
  ```

<br>

- 삽입이상
  - 계절학기에 새로운 자바 강좌 개설

  ```sql
  -- JAVA 강좌 개설 시 수강생이 없어 sid 값을 알 수 없음
  INSERT INTO Summer VALUES (NULL, 'JAVA', 25000);

  SELECT COUNT(*) '수강인원'
  FROM Summer  -- 5

  SELECT COUNT(sid) '수강인원'
  FROM Summer;  -- 4

  SELECT COUNT(*) '수강인원'
  FROM Summer
  WHERE sid IS NOT NULL;  -- 4
  ```

<br>

- 수정이상
  - `FORTRAN` 강좌의 수강료를 `20000`원에서 `15000`원으로 수정

  ```sql
  UPDATE Summer
  SET price = 15000
  WHERE class = 'FORTRAN';  -- 올바른 수정

  UPDATE Summer
  SET price = 15000
  WHERE class = 'FORTRAN' AND sid = 100;  -- 불일치 발생
  ```

<br>

- 수정된 계절학기 수강 테이블  
![summer_table_anomaly](TODO)  

<br>

### 2. 함수 종속성
- 학생수강성적 릴레이션의 각 속성 사이에는 의존성이 존재.  
![functional_dependency_example](TODO)  
  - 어떤 속성 `A`의 값을 알면 다른 속성 `B`의 값이 유일하게 정해지는 의존 관계를 '속성 `B`는 속성 `A`에 종속한다(dependent)' 혹은 속성 `A`는 속성 `B`를 결정한다(determine)'고 표현.  

- `A` → `B`로 표기하며, `A`를 `B`의 결정자(determinant) 라고 함

- 위 릴레이션에서 종속관계에 있는 예
  - `학생번호` → `학생이름`
  - `학생번호` → `주소`
  - `강좌이름` → `강의실`
  - `학과` → `학과사무실`

- 종속하지 않는 예
  - `학생이름` → `강좌이름`
  - `학과` → `학생번호`
  - `학생이름` → `학과`

- 학생수강성적 릴레이션의 종속관계 시각화  
![functional_dependency_example_graph](TODO)  

<br>

- **함수 종속성 다이어그램**(functional dependency diagram)으로 함수 종속성을 나타낼 수 있다.
  - 릴레이션의 속성 : 직사각형
  - 속성 간의 함수 종속성 : 화살표
  - 복합 속성 : 직사각형으로 묶음  
  ![functional_dependency_diagram_example](TODO)  

<br>          
<br>
<br>
<br>
<details>
<summary>주의사항</summary>
<div markdown="1">

이 포스팅은 강원대학교 최황규 교수님의 데이터베이스 수업을 들으며 내용을 정리 한 것입니다.  
수업 내용에 대한 저작권은 교수님께 있으니,  
다른 곳으로의 무분별한 내용 복사를 자제해 주세요.

</div>
</details>